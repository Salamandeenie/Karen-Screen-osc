{"version":3,"sources":["tools/canvas_tools.js","index.js"],"names":["_initCvs","ctx","width","height","fillStyle","strokeStyle","_primer","fillRect","backupStroke","beginPath","moveTo","lineTo","stroke","_drawRawOsc","data","i","length","x","y","audioContext","canvasElement","audioSource","audioDest","analyzerFFT","canvasInitFunction","drawingPrimerFunction","actx","FFT","cvs","init","_ct","primer","paused","anl","createAnalyser","fftSize","connect","WIDTH","HEIGHT","u8ar","Uint8Array","cctx","getContext","draw","requestAnimationFrame","clearRect","getByteTimeDomainData","start","pause","reset","fill"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["function _initCvs(ctx, width, height){\n    ctx.fillStyle   = \"#000\";\n    ctx.strokeStyle = \"#0f0\";\n}\nfunction _primer(ctx, width, height){\n    ctx.fillRect(0,0,width,height);\n    let backupStroke = ctx.strokeStyle;\n    ctx.strokeStyle = \"#777\";\n    ctx.beginPath();\n    ctx.moveTo(0, height / 2);\n    ctx.lineTo(width, height / 2);\n    ctx.stroke();\n    ctx.strokeStyle = backupStroke;\n}\nfunction _drawRawOsc(ctx,data,width,height){\n    ctx.beginPath();\n    for(let i=0; i < data.length; i++){\n        let x = i * (width * 1.0 / data.length); // need to fix x\n        let v = data[i] / 128.0;\n        let y = v * height / 2;\n        if(i === 0) ctx.moveTo(x,y);\n        else ctx.lineTo(x,y);\n    }\n    ctx.stroke();\n}\nexport {\n    _initCvs,\n    _primer,\n    _drawRawOsc\n}","\"use strict\";\nimport * as _ct from \"./tools/canvas_tools\";\nexport default function(audioContext, canvasElement, audioSource, audioDest = null, analyzerFFT = 2048, canvasInitFunction = null, drawingPrimerFunction = null){\n        this.actx   = audioContext;\n        this.FFT    = analyzerFFT;\n        this.cvs    = canvasElement;\n        this.init   = canvasInitFunction    || _ct._initCvs;\n        this.primer = drawingPrimerFunction || _ct._primer;\n        this.paused = false;\n        this.anl    = this.actx.createAnalyser();\n        // Configure Analyzer\n        this.anl.fftSize = this.FFT;\n        audioSource.connect(this.anl);\n        if(audioDest) this.anl.connect(audioDest);\n        // Set up Canvas\n        let {width = 300, height = 150} = this.cvs;\n        this.WIDTH  = width;\n        this.HEIGHT = height;\n        this.u8ar = new Uint8Array(this.FFT);\n        this.cctx = this.cvs.getContext(\"2d\");\n        this.init(this.cctx,this.WIDTH,this.HEIGHT);\n        this.draw = () =>{\n            if(!this.paused) requestAnimationFrame(this.draw);\n            this.cctx.clearRect(0 , 0, this.WIDTH, this.HEIGHT);\n            this.primer(this.cctx, this.WIDTH, this.HEIGHT);\n            this.anl.getByteTimeDomainData(this.u8ar);\n            _ct._drawRawOsc(this.cctx, this.u8ar, this.WIDTH, this.HEIGHT);\n        }\n        this.start = () => {\n            this.paused = false;\n            this.draw();\n        }\n        this.pause = () =>{\n            this.paused = true;\n        }\n        this.reset = () =>{\n            this.paused = true;\n            requestAnimationFrame(()=>{\n                this.u8ar = new Uint8Array(this.FFT).fill(0);\n                this.cctx.clearRect(0 , 0, this.WIDTH, this.HEIGHT);\n                this.primer(this.cctx, this.WIDTH, this.HEIGHT);\n                _ct._drawRawOsc(this.cctx, this.u8ar, this.WIDTH, this.HEIGHT);\n            });\n        }\n}"]}
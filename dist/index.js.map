{"version":3,"sources":["tools/canvas_tools.js","index.js"],"names":["_initCvs","ctx","width","height","fillStyle","strokeStyle","_primer","fillRect","_drawRawOsc","data","beginPath","i","length","x","y","moveTo","lineTo","stroke","AudioOSC","cvs","source","dest","fft","init","_ct","primer","paused","requestAnimationFrame","draw","cctx","clearRect","WIDTH","HEIGHT","anl","getByteTimeDomainData","u8ar","Uint8Array","fill","actx","FFT","createAnalyser","fftSize","connect","getContext"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["function _initCvs(ctx, width, height){\n    ctx.fillStyle   = \"#000\";\n    ctx.strokeStyle = \"#0f0\";\n}\nfunction _primer(ctx, width, height){\n    ctx.fillRect(0,0,width,height);\n}\nfunction _drawRawOsc(ctx,data,width,height){\n    ctx.beginPath();\n    for(let i=0; i < data.length; i++){\n        let x = i * (width * 1.0 / data.length); // need to fix x\n        let v = data[i] / 128.0;\n        let y = v * height / 2;\n        if(i === 0) ctx.moveTo(x,y);\n        else ctx.lineTo(x,y);\n    }\n    ctx.stroke();\n}\nexport {\n    _initCvs,\n    _primer,\n    _drawRawOsc\n}","\"use strict\";\nimport * as _ct from \"./tools/canvas_tools\";\nexport default class AudioOSC{\n    constructor(ctx, cvs, source, dest = null, fft = 2048, init = _ct._initCvs, primer = _ct._primer){\n        this.actx   = ctx;\n        this.FFT    = fft;\n        this.cvs    = cvs;\n        this.init   = init;\n        this.primer = primer;\n        this.paused = false;\n        this.anl    = this.actx.createAnalyser();\n        // Configure Analyzer\n        this.anl.fftSize = this.FFT;\n        source.connect(this.anl);\n        if(dest) this.anl.connect(dest);\n        // Set up Canvas\n        let {width = 300, height = 150} = this.cvs;\n        this.WIDTH  = width;\n        this.HEIGHT = height;\n        this.u8ar = new Uint8Array(this.FFT);\n        this.cctx = this.cvs.getContext(\"2d\");\n        this.init(this.cctx,this.WIDTH,this.HEIGHT);\n    }\n    draw = () =>{\n        if(!this.paused) requestAnimationFrame(this.draw);\n        this.cctx.clearRect(0 , 0, this.WIDTH, this.HEIGHT);\n        this.primer(this.cctx, this.WIDTH, this.HEIGHT);\n        this.anl.getByteTimeDomainData(this.u8ar);\n        _ct._drawRawOsc(this.cctx, this.u8ar, this.WIDTH, this.HEIGHT);\n    }\n    start = () => {\n        this.paused = false;\n        this.draw();\n    }\n    pause = () =>{\n        this.paused = true;\n    }\n    reset = () =>{\n        this.u8ar = new Uint8Array().fill(0);\n        this.cctx.clearRect(0 , 0, this.WIDTH, this.HEIGHT);\n        this.primer(this.cctx, this.WIDTH, this.HEIGHT);\n        _ct._drawRawOsc(this.cctx, this.u8ar, this.WIDTH, this.HEIGHT);\n    }\n}"]}